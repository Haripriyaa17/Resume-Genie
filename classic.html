<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Resume</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Helvetica', 'Arial', sans-serif;
            color: #333;
            background-color: #f5f5f5;
        }
        .resume-container {
            max-width: 850px;
            margin: 30px auto;
            background-color: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            padding: 30px;
        }
        .resume-header {
            text-align: center;
            border-bottom: 1px solid #ddd;
            padding-bottom: 20px;
            margin-bottom: 20px;
        }
        .resume-name {
            font-size: 28px;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 5px;
            font-weight: 400;
            color: #333;
        }
        .resume-title {
            font-size: 16px;
            color: #555;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .resume-contact {
            font-size: 12px;
            color: #555;
            margin-top: 15px;
        }
        .resume-section {
            margin-bottom: 25px;
        }
        .resume-section-title {
            font-size: 14px;
            font-weight: bold;
            text-transform: uppercase;
            color: #333;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
            margin-bottom: 15px;
        }
        .resume-section-content {
            font-size: 14px;
            color: #444;
        }
        .job-company {
            font-weight: bold;
        }
        .job-title {
            font-style: italic;
        }
        .job-date {
            float: right;
            color: #666;
        }
        .job-details {
            margin-top: 5px;
            margin-bottom: 15px;
        }
        .skills-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
        }
        .skill-item {
            margin-bottom: 10px;
        }
        .skill-name {
            font-weight: 500;
            margin-bottom: 3px;
        }
        .circular-progress {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: conic-gradient(var(--progress-color) var(--progress), #e0e0e0 0);
            display: inline-block;
            margin-right: 10px;
            position: relative;
        }
        .circular-progress::before {
            content: '';
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 5px;
            left: 5px;
        }
        .progress-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 12px;
            font-weight: bold;
        }
        .profile-picture {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            margin: 0 auto 15px auto;
            display: block;
            border: 3px solid #eee;
        }
        @media print {
            body {
                background-color: white;
            }
            .resume-container {
                box-shadow: none;
                margin: 0;
                padding: 0;
            }
            .no-print {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">

        <div class="resume-container">
            <div class="resume-header">
                <img id="profileImage" class="profile-picture" src="https://via.placeholder.com/120" alt="Profile Picture">
                <h1 class="resume-name" id="resumeName">SOPHIA WALKER</h1>
                <div class="resume-title" id="resumeTitle">PROFESSIONAL TITLE</div>
                <div class="resume-contact" id="resumeContact">
                    555-000-000 • email@example.com • City, CA, State • linkedin.com/in/username
                </div>
            </div>

            <div class="resume-section">
                <h2 class="resume-section-title">PROFESSIONAL SUMMARY</h2>
                <div class="resume-section-content" id="resumeSummary">
                    A compelling summary is like a novel's script. It draws the recruiter's attention and entices them to keep reading. Briefly describe your professional experience, your potential, skills, and achievements. Remember to write a stunning resume with the Ultimate Resume Writing Guide included in every resume.
                </div>
            </div>

            <div class="resume-section">
                <h2 class="resume-section-title">WORK EXPERIENCE</h2>
                <div class="resume-section-content" id="resumeExperience">
                    <!-- This will be populated with experience data -->
                </div>
            </div>

            <div class="resume-section">
                <h2 class="resume-section-title">EDUCATION</h2>
                <div class="resume-section-content" id="resumeEducation">
                    <!-- This will be populated with education data -->
                </div>
            </div>

            <div class="resume-section">
                <h2 class="resume-section-title">SKILLS & EXPERTISE</h2>
                <div class="skills-grid" id="resumeSkills">
                    <!-- This will be populated with skills data -->
                </div>
            </div>
            <div class="row no-print mb-4 mt-3">
                <div class="col-12 text-center">
                    <button class="btn btn-secondary" onclick="window.print()">Print Resume</button>
                    <button class="btn btn-secondary ms-2" onclick="window.location.href='form.html'">Back to form</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get data from localStorage
            const name = localStorage.getItem("name") || "SOPHIA WALKER";
            const title = localStorage.getItem("title") || "PROFESSIONAL TITLE";
            const email = localStorage.getItem("email") || "email@example.com";
            const phone = localStorage.getItem("phone") || "555-000-000";
            const address = localStorage.getItem("address") || "City, CA, State";
            const summary = localStorage.getItem("summary") || "A compelling summary is like a novel's script. It draws the recruiter's attention and entices them to keep reading. Briefly describe your professional experience, your potential, skills, and achievements.";
            const skills = localStorage.getItem("skills") || "HTML:90, CSS:85, JavaScript:80";
            const additionalSkills = localStorage.getItem("additionalSkills") || "Team Leadership:90, Problem Solving:85";
            const experience = localStorage.getItem("experience") || "";
            const education = localStorage.getItem("education") || "";
            const profilePic = localStorage.getItem("profilePic");

            // Set values in the resume
            document.getElementById("resumeName").textContent = name.toUpperCase();
            document.getElementById("resumeTitle").textContent = title.toUpperCase();
            
            // Format contact info
            const contactString = `${phone} • ${email} • ${address} • linkedin.com/in/${name.toLowerCase().replace(/\s+/g, '')}`;
            document.getElementById("resumeContact").textContent = contactString;
            
            document.getElementById("resumeSummary").textContent = summary;
            
            // Set profile picture
            if (profilePic && profilePic !== "https://via.placeholder.com/120") {
                document.getElementById("profileImage").src = profilePic;
            }

            // Format experience
            const experienceContainer = document.getElementById("resumeExperience");
            if (experience) {
                const experiences = experience.split('\n\n');
                
                experiences.forEach(exp => {
                    const lines = exp.split('\n');
                    if (lines.length > 0) {
                        // Parse the first line to get company and title
                        const firstLine = lines[0];
                        let company = '', title = '', dates = '';
                        
                        if (firstLine.includes(' - ')) {
                            const parts = firstLine.split(' - ');
                            company = parts[0].trim();
                            
                            // Check if title contains dates in parentheses
                            const titlePart = parts[1].trim();
                            if (titlePart.includes('(') && titlePart.includes(')')) {
                                const dateStartIndex = titlePart.lastIndexOf('(');
                                const dateEndIndex = titlePart.lastIndexOf(')');
                                
                                title = titlePart.substring(0, dateStartIndex).trim();
                                dates = titlePart.substring(dateStartIndex + 1, dateEndIndex).trim();
                            } else {
                                title = titlePart;
                            }
                        } else {
                            company = firstLine;
                        }
                        
                        // Create experience entry
                        const expEntry = document.createElement('div');
                        expEntry.classList.add('job-entry');
                        
                        const jobHeader = document.createElement('div');
                        const companySpan = document.createElement('span');
                        companySpan.classList.add('job-company');
                        companySpan.textContent = company;
                        
                        const jobTitle = document.createElement('span');
                        jobTitle.classList.add('job-title');
                        jobTitle.textContent = title ? ` | ${title}` : '';
                        
                        const jobDate = document.createElement('span');
                        jobDate.classList.add('job-date');
                        jobDate.textContent = dates ? dates : '';
                        
                        jobHeader.appendChild(companySpan);
                        jobHeader.appendChild(jobTitle);
                        jobHeader.appendChild(jobDate);
                        
                        expEntry.appendChild(jobHeader);
                        
                        // Create list for responsibilities
                        const jobDetails = document.createElement('ul');
                        jobDetails.classList.add('job-details');
                        
                        // Add responsibilities as list items
                        for (let i = 1; i < lines.length; i++) {
                            const line = lines[i].trim();
                            if (line.startsWith('-') || line.startsWith('•')) {
                                const listItem = document.createElement('li');
                                listItem.textContent = line.substring(1).trim();
                                jobDetails.appendChild(listItem);
                            }
                        }
                        
                        expEntry.appendChild(jobDetails);
                        experienceContainer.appendChild(expEntry);
                    }
                });
            } else {
                // Use default content from the image example
                experienceContainer.innerHTML = `
                    <div class="job-entry">
                        <div><span class="job-company">Company Name</span> <span class="job-title">| JOB TITLE</span> <span class="job-date">MON YYYY - Present</span></div>
                        <ul class="job-details">
                            <li>List key responsibilities and achievements with bullet points.</li>
                            <li>Include accomplishments and data-backed results if you can.</li>
                            <li>Quantify achievements when possible to show impact.</li>
                            <li>Example of a winning bullet point: "Increased engagement on managed social media by 25% in 6 months"</li>
                        </ul>
                    </div>
                    <div class="job-entry">
                        <div><span class="job-company">Company Name</span> <span class="job-title">| JOB TITLE</span> <span class="job-date">MON YYYY - MON YYYY</span></div>
                        <ul class="job-details">
                            <li>Carefully read the job ads and tailor each application to the job description.</li>
                            <li>You can learn how to write winning bullet points by reading our Guide 64's Five with every resume!</li>
                            <li>Example of bullet point with strong action verbs (e.g. "Spearheaded", "Authored")</li>
                            <li>Be specific. Don't just tell HR what you've done, show them the results you achieved</li>
                        </ul>
                    </div>
                    <div class="job-entry">
                        <div><span class="job-company">Company Name</span> <span class="job-title">| JOB TITLE</span> <span class="job-date">MON YYYY - MON YYYY</span></div>
                        <ul class="job-details">
                            <li>Did you know that 95% of Fortune Companies use ATS software, but three out of four resumes get disqualified by the ATS because of their format?</li>
                            <li>Choosing the right resume is the first step to successful job hunting.</li>
                            <li>We designed our resumes to both aesthetically pleasing and pass ATS "Compliance to get your foot in the door!"</li>
                            <li>Now you can follow your dream job</li>
                        </ul>
                    </div>
                `;
            }

            // Format education
            const educationContainer = document.getElementById("resumeEducation");
            if (education) {
                const educations = education.split('\n\n');
                
                educations.forEach(edu => {
                    const lines = edu.split('\n');
                    if (lines.length > 0) {
                        const firstLine = lines[0];
                        let institution = '', degree = '', year = '';
                        
                        if (firstLine.includes(' - ')) {
                            const parts = firstLine.split(' - ');
                            institution = parts[0].trim();
                            
                            const degreePart = parts[1].trim();
                            if (degreePart.includes('(') && degreePart.includes(')')) {
                                const yearStartIndex = degreePart.lastIndexOf('(');
                                const yearEndIndex = degreePart.lastIndexOf(')');
                                
                                degree = degreePart.substring(0, yearStartIndex).trim();
                                year = degreePart.substring(yearStartIndex + 1, yearEndIndex).trim();
                            } else {
                                degree = degreePart;
                            }
                        } else {
                            institution = firstLine;
                        }
                        
                        // Create education entry
                        const eduEntry = document.createElement('div');
                        eduEntry.classList.add('edu-entry', 'mb-3');
                        
                        const eduHeader = document.createElement('div');
                        const institutionSpan = document.createElement('span');
                        institutionSpan.classList.add('job-company');
                        institutionSpan.textContent = institution;
                        
                        const degreeSpan = document.createElement('span');
                        degreeSpan.classList.add('job-title');
                        degreeSpan.textContent = degree ? ` | ${degree}` : '';
                        
                        const yearSpan = document.createElement('span');
                        yearSpan.classList.add('job-date');
                        yearSpan.textContent = year ? year : '';
                        
                        eduHeader.appendChild(institutionSpan);
                        eduHeader.appendChild(degreeSpan);
                        eduHeader.appendChild(yearSpan);
                        
                        eduEntry.appendChild(eduHeader);
                        
                        // Add additional details if any
                        if (lines.length > 1) {
                            const detailsList = document.createElement('ul');
                            
                            for (let i = 1; i < lines.length; i++) {
                                const line = lines[i].trim();
                                if (line.startsWith('-') || line.startsWith('•')) {
                                    const listItem = document.createElement('li');
                                    listItem.textContent = line.substring(1).trim();
                                    detailsList.appendChild(listItem);
                                }
                            }
                            
                            eduEntry.appendChild(detailsList);
                        }
                        
                        educationContainer.appendChild(eduEntry);
                    }
                });
            } else {
                // Default content
                educationContainer.innerHTML = `
                    <div class="edu-entry mb-3">
                        <div><span class="job-company">University Name</span> <span class="job-title">| YOUR DEGREE HERE</span> <span class="job-date">MON YYYY - MON YYYY</span></div>
                    </div>
                    <div class="edu-entry">
                        <div><span class="job-company">University Name</span> <span class="job-title">| YOUR DEGREE HERE</span> <span class="job-date">MON YYYY - MON YYYY</span></div>
                    </div>
                `;
            }

            // Format skills
            const skillsContainer = document.getElementById("resumeSkills");
            
            // Format circular skills
            if (skills) {
                const skillsArray = skills.split(',').map(s => s.trim());
                
                skillsArray.forEach(skill => {
                    if (skill.includes(':')) {
                        const [skillName, skillValue] = skill.split(':').map(s => s.trim());
                        const percentage = parseInt(skillValue) || 0;
                        
                        const skillDiv = document.createElement('div');
                        skillDiv.classList.add('skill-item', 'd-flex', 'align-items-center');
                        
                        const circularProgress = document.createElement('div');
                        circularProgress.classList.add('circular-progress');
                        circularProgress.style.setProperty('--progress', `${percentage}%`);
                        circularProgress.style.setProperty('--progress-color', '#555');
                        
                        const progressLabel = document.createElement('div');
                        progressLabel.classList.add('progress-label');
                        progressLabel.textContent = `${percentage}%`;
                        
                        circularProgress.appendChild(progressLabel);
                        
                        const skillNameDiv = document.createElement('div');
                        skillNameDiv.textContent = skillName;
                        
                        skillDiv.appendChild(circularProgress);
                        skillDiv.appendChild(skillNameDiv);
                        
                        skillsContainer.appendChild(skillDiv);
                    }
                });
            }
            
            // Add additional skills as regular text
            if (additionalSkills) {
                const additionalSkillsArray = additionalSkills.split(',').map(s => s.trim());
                
                additionalSkillsArray.forEach(skill => {
                    if (skill.includes(':')) {
                        const [skillName, skillValue] = skill.split(':').map(s => s.trim());
                        
                        const skillDiv = document.createElement('div');
                        skillDiv.classList.add('skill-item');
                        
                        const skillNameDiv = document.createElement('div');
                        skillNameDiv.classList.add('skill-name');
                        skillNameDiv.textContent = skillName;
                        
                        const progressBar = document.createElement('div');
                        progressBar.classList.add('progress', 'mt-1');
                        progressBar.style.height = '8px';
                        
                        const progressInner = document.createElement('div');
                        progressInner.classList.add('progress-bar');
                        progressInner.style.width = `${skillValue}%`;
                        progressInner.style.backgroundColor = '#555';
                        
                        progressBar.appendChild(progressInner);
                        skillDiv.appendChild(skillNameDiv);
                        skillDiv.appendChild(progressBar);
                        
                        skillsContainer.appendChild(skillDiv);
                    }
                });
            }
            
            // Add default skills if none provided
            if (!skills && !additionalSkills) {
                skillsContainer.innerHTML = `
                    <div class="skill-item">
                        <div class="skill-name">Your Skill Name</div>
                        <div class="progress mt-1" style="height: 8px;">
                            <div class="progress-bar" style="width: 85%; background-color: #555;"></div>
                        </div>
                    </div>
                    <div class="skill-item">
                        <div class="skill-name">Your Skill Name</div>
                        <div class="progress mt-1" style="height: 8px;">
                            <div class="progress-bar" style="width: 75%; background-color: #555;"></div>
                        </div>
                    </div>
                    <div class="skill-item">
                        <div class="skill-name">Your Skill Name</div>
                        <div class="progress mt-1" style="height: 8px;">
                            <div class="progress-bar" style="width: 90%; background-color: #555;"></div>
                        </div>
                    </div>
                    <div class="skill-item">
                        <div class="skill-name">Your Skill Name</div>
                        <div class="progress mt-1" style="height: 8px;">
                            <div class="progress-bar" style="width: 80%; background-color: #555;"></div>
                        </div>
                    </div>
                `;
            }
        });
    </script>
</body>
</html>